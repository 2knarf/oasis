From c01e384fc7e008f6946c4b530376805e9014e684 Mon Sep 17 00:00:00 2001
From: Michael Forney <mforney@mforney.org>
Date: Fri, 2 Dec 2016 21:09:37 -0800
Subject: [PATCH] xinstall: Check result of fchmod

---
 xinstall.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/xinstall.c b/xinstall.c
index bf921fb..5a0e390 100644
--- a/xinstall.c
+++ b/xinstall.c
@@ -119,7 +119,8 @@ install(const char *s1, const char *s2, int depth)
 		}
 		concat(f1, s1, f2, s2);
 
-		fchmod(fileno(f2), mode);
+		if (fchmod(fileno(f2), mode) < 0)
+			eprintf("fchmod %s:", s2);
 
 		if (fclose(f2) == EOF)
 			eprintf("fclose %s:", s2);
-- 
2.11.0

