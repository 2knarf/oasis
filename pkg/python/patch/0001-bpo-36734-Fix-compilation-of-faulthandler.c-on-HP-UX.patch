From c4c5cf8ebe27232ed72e047989ee428b51613835 Mon Sep 17 00:00:00 2001
From: Victor Stinner <vstinner@redhat.com>
Date: Tue, 30 Apr 2019 12:19:34 +0200
Subject: [PATCH] bpo-36734: Fix compilation of faulthandler.c on HP-UX
 (GH-12970)

Initialize "stack_t current_stack" to zero using memset().
---
 .../next/Library/2019-04-26-17-14-20.bpo-36734.p2MaiN.rst      | 2 ++
 Modules/faulthandler.c                                         | 3 ++-
 2 files changed, 4 insertions(+), 1 deletion(-)
 create mode 100644 Misc/NEWS.d/next/Library/2019-04-26-17-14-20.bpo-36734.p2MaiN.rst

diff --git a/Misc/NEWS.d/next/Library/2019-04-26-17-14-20.bpo-36734.p2MaiN.rst b/Misc/NEWS.d/next/Library/2019-04-26-17-14-20.bpo-36734.p2MaiN.rst
new file mode 100644
index 0000000000..09341990a6
--- /dev/null
+++ b/Misc/NEWS.d/next/Library/2019-04-26-17-14-20.bpo-36734.p2MaiN.rst
@@ -0,0 +1,2 @@
+Fix compilation of ``faulthandler.c`` on HP-UX. Initialize ``stack_t
+current_stack`` to zero using ``memset()``.
diff --git a/Modules/faulthandler.c b/Modules/faulthandler.c
index cf24c9b2b9..ec5192832c 100644
--- a/Modules/faulthandler.c
+++ b/Modules/faulthandler.c
@@ -1369,7 +1369,8 @@ void _PyFaulthandler_Fini(void)
 #ifdef HAVE_SIGALTSTACK
     if (stack.ss_sp != NULL) {
         /* Fetch the current alt stack */
-        stack_t current_stack = {};
+        stack_t current_stack;
+        memset(&current_stack, 0, sizeof(current_stack));
         if (sigaltstack(NULL, &current_stack) == 0) {
             if (current_stack.ss_sp == stack.ss_sp) {
                 /* The current alt stack is the one that we installed.
-- 
2.22.0

